<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>HTMLページ作成ツール</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .input-area {
      margin-bottom: 20px;
    }
    .textarea-wrapper{
      position: relative;
      display: inline-block;
    }
    #format{
      position: absolute;
      top: 155px;
      left: 5px;
      z-index: 1;
    }
    #textInput{
      margin-left: 65px;
    }
    select, input, button {
      margin-right: 10px;
      padding: 5px;
    }
    #previewList {
      list-style: none;
      padding-left: 0;
    }
    #previewList li {
      margin-bottom: 5px;
    }
    #previewList li button {
      padding: 3px 6px;
      font-size: 0.9em;
      cursor: pointer;
    }
    #htmlOutput {
      width: 100%;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>HTMLページ作成ツール</h1>

  <div class="input-area">
    <select id="format">
      <option value="heading">見出し</option>
      <option value="boldletters">太文字</option>
      <option value="paragraph">本文</option>
      <option value="url">URL</option>
      <option value="image">画像</option>
    </select>
    <input type="file" id="imageInput" accept="image/*">
    <textarea id="textInput" placeholder="文章を入力" rows="10" cols="50"></textarea>
    <button onclick="addContent()">追加</button>
  </div>

  <ul id="previewList"></ul>

  <button onclick="generateHTML()">HTML生成</button>

  <div id="outputArea">
    <h2>生成されたHTML</h2>
    <button onclick="showhtml()">HTMLコード</button>
    <button onclick="showtxt()">本文</button>
    <textarea id="htmlOutput" rows="30" cols="80" readonly></textarea>
    <div id="textOutput" style="display:none; border:1px solid #ccc; background:#fff; padding:10px; margin-top:10px;"></div>
  </div>

  <script>
    const contentList = [];
    

    function addContent() {
      const format = document.getElementById("format").value;
      const text = document.getElementById("textInput").value.trim();
      if (!text) return;

      contentList.push({ format, text });
      updatePreview();
      document.getElementById("textInput").value = "";
    }

    function updatePreview() {
      const preview = document.getElementById("previewList");
      preview.innerHTML = "";
      contentList.forEach((item, index) => {

        const li = document.createElement("li");
        li.innerHTML = `[${item.format}] ${item.text.replace(/\n/g,"<br>")}`;
        
        const delBtn = document.createElement("button");
        delBtn.textContent = "削除";
        delBtn.onclick = function() {
          contentList.splice(index, 1);
          updatePreview();
        };

        li.appendChild(delBtn);
        preview.appendChild(li);
      });
    }

  document.getElementById("imageInput").addEventListener("change", function() {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      const imageDataUrl = e.target.result;
      contentList.push({ format: "image", text: imageDataUrl });
      updatePreview();
    };
    reader.readAsDataURL(file);
  });

    function generateHTML() {
      let html = "<!DOCTYPE html>\n<html lang=&quot;ja&quot;>\n<head>\n <meta charset=&quot;UTF-8&quot;>\n<head>\n<body>\n";
      html = html.replace(/&quot;/g,'"');

        contentList.forEach(item => {
          const escapedText = item.text.replace(/\n/g,"<br>");

        switch (item.format) {
          case "heading":
            html += `<h1>${escapedText}</h1>\n`;
            break;
          case "boldletters":
            html += `<h3>${escapedText}</h3>\n`;
            break;
          case "paragraph":
            html += `<p>${escapedText}</p>\n`;
            break;
          case "url":
            html += `<a href="${item.text}">${item.text}</a>`
            break;
          case "image":
            html += `<img src="${item.text}" alt="image">\n`;
            break;
        }
      });
      html += "</body>\n</html>";
      document.getElementById("htmlOutput").value = html;
      document.getElementById("textOutput").innerHTML = html.match(/<body>([\s\S]*)<\/body>/i)
        ? html.match(/<body>([\s\S]*)<\/body>/i)[1]
        : "";
      showhtml();
    }

    function showhtml(){
      document.getElementById("htmlOutput").style.display = "block";
      document.getElementById("textOutput").style.display = "none";
    }

    function showtxt(){
      document.getElementById("htmlOutput").style.display = "none";
      document.getElementById("textOutput").style.display = "block";
    }

  </script>
</body>
</html>


